<template>
  <div>
    <!--  面包屑  -->
    <el-row :gutter="20">
      <el-col :span="20" :offset="2">
        <el-backtop>
          <i class="el-icon-caret-top"></i>
        </el-backtop>
        <el-breadcrumb separator-class="el-icon-arrow-right" class="bread">
          <el-breadcrumb-item></el-breadcrumb-item>
          <el-breadcrumb-item>帖子</el-breadcrumb-item>
        </el-breadcrumb>
      </el-col>
    </el-row>

    <div class="all">
      <el-row :gutter="20">
        <el-col :xs="1" :sm="2" :md="2" :lg="2" :xl="2">
          <div class="grid-content bg-purple"></div>
        </el-col>
        <el-col :xs="16" :sm="15" :md="15" :lg="15" :xl="11">
          <el-card class="box-card">
            <div slot="header" class="clearfix">
              <span id="title">{{ title }}</span>
              <span class="icon">
                <span style="margin-right: 10px; color: #77b72c; font-weight: bold;">
                  <i class="el-icon-chat-line-round"></i>
                  <span>{{ commentCount }}</span>
                </span>
                <span style="color: #77b72c; font-weight: bold;">
                  <i class="el-icon-view"></i>
                  <span>100</span>
                </span>
              </span>
            </div>
            <div class="userInfo">
              <router-link to="/home" class="userLink" style="text-decoration: none;">
                {{ author.username }}
              </router-link>
              {{ create_time }}&nbsp;发表&nbsp;&nbsp;&nbsp;
              最后修改于：{{ model_time }}
            </div>
            <MarkDown :text="content" class="content"/>
            <div class="lcs">
              <a href="javascript:void(0);" class="endEmg" style="text-decoration: none;">
                <img src="@/assets/icon/like.png" alt="点赞">
                点赞
                <span>(100)</span>
              </a>
              <a href="javascript:void(0);" class="endEmg" style="text-decoration: none;">
                <img src="@/assets/icon/collect.png" alt="收藏">
                收藏
                <span>(100)</span>
              </a>
              <a href="javascript:void(0);" class="endEmg" style="text-decoration: none;">
                <img src="@/assets/icon/share.png" alt="转发">
                转发
                <span>(100)</span>
              </a>
            </div>
            <div class="tags" v-for="tag in tagList" :key="tag.id">
              相关标签：
              <el-tag size="small">{{ tag.tagName }}</el-tag>
            </div>
          </el-card>
        </el-col>
        <el-col :xs="0" :sm="0" :md="0" :lg="0" :xl="4">
          <div class="grid-content bg-purple-light"></div>
        </el-col>
        <el-col :xs="7" :sm="6" :md="6" :lg="6" :xl="6">
          <el-card shadow="hover" style="margin-bottom: 25px;">
            <div class="hotTags">热门标签</div>
            <el-tag class="hotTag">计算机考研</el-tag>
            <el-tag class="hotTag">学习</el-tag>
            <el-tag class="hotTag">学校是个好地方</el-tag>
            <el-tag class="hotTag">上海大学</el-tag>
            <el-tag class="hotTag">上海的大学</el-tag>
            <el-tag class="hotTag">上海的大学</el-tag>
            <el-tag class="hotTag">上海的大学</el-tag>
            <el-tag class="hotTag">学校地啊书法大赛址</el-tag>
          </el-card>
          <el-card shadow="hover">
            <div class="hotTags">更多文章</div>
            <ul>
              <li class="liLink">
                <router-link to="/home" style="text-decoration: none; color: #049cdb">复旦大学考研调剂信息回顾（2021年）</router-link>
              </li>
              <li class="liLink">
                <router-link to="/home" style="text-decoration: none; color: #049cdb">复旦大学考研调剂信息回顾（2021年）</router-link>
              </li>
              <li class="liLink">
                <router-link to="/home" style="text-decoration: none; color: #049cdb">复旦大学考研调剂信息回顾（2021年）</router-link>
              </li>
            </ul>
          </el-card>
        </el-col>
      </el-row>

      <el-row :gutter="20" class="elCol4">
        <el-col :xs="1" :sm="2" :md="2" :lg="2" :xl="2">
          <div class="grid-content bg-purple"></div>
        </el-col>
        <el-col :xs="16" :sm="15" :md="15" :lg="15" :xl="11">
          <el-card class="box-card">
            <comment-text
                ref="my_comment"
                :placeholder="placeholder"
                @submit_click="submit_click"
            />
            <h1 class="title">全部评论 {{ commentCount }}</h1>
            <!--     回复区       -->
            <el-dialog
                title="说点什么呢？"
                :visible.sync="dialogVisible"
                width="50%">
              <el-input
                  type="textarea"
                  :placeholder="'回复' + commentParam.username"
                  maxlength="200"
                  v-model="replyText"
                  show-word-limit/>
              <span slot="footer" class="dialog-footer">
                  <el-button @click="giveup_son_click">取 消</el-button>
                  <el-button type="primary" @click="submit_son_click">确 定</el-button>
                </span>
            </el-dialog>
            <!--     评论列表      -->
            <div v-for="comment in commentList" :key="comment.id">
              <div class="comment">
                <div>
                  <a href="" class="user-link">
                    <el-avatar style="margin: 8px 8px;" size="medium" :src="comment.author.userImg"></el-avatar>
                  </a>
                </div>
                <div class="content-box">
                  <!--       主评论           -->
                  <div class="comment-main">
                    <div class="user-box">
                      <a href="" target="_blank" style="text-decoration: none;">
                        <span class="username">
                          {{ comment.author.username }}
                        </span>
                      </a>
                      <!---->
                      <time :title="comment.createTime" class="time">
                        {{ comment.createTime }}
                      </time>
                    </div>
                    <div class="comment-content">
                      <MarkDown :text="comment.content" class="content"/>
                    </div>
                    <!---->
                    <div class="action-box">
                      <div class="like">
                        <a href="">
                          <svg v-if="false" style="width: 20px;height: 20px;" t="1645346242001" class="icon"
                               viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2068"
                               width="200" height="200">
                            <path
                                d="M939.358251 423.424662c-23.01825-37.252439-62.924121-60.779272-107.019409-63.209624-2.755764-0.38681-5.510504-0.579191-8.347109-0.579191l-152.202471-0.121773c6.649444-28.975938 10.015098-58.653865 10.015098-88.657202 0-28.223808-3.213181-57.139372-9.556657-85.952604-0.447185-2.043542-1.098008-4.006244-1.932002-5.866614-15.820314-57.302077-67.37755-96.841605-127.282918-96.841605-72.827679 0-132.081201 59.254545-132.081201 132.081201 0 3.334955 0.132006 6.66991 0.406253 10.015098-2.196015 57.211003-32.108279 109.947088-80.269162 141.363611-14.447037 9.42465-18.524912 28.773324-9.099239 43.220361 9.414417 14.437827 28.752858 18.535145 43.220361 9.099239 65.811892-42.925648 106.429984-115.325585 108.656699-193.684234 0.030699-1.332345-0.010233-2.663666-0.14224-3.996011-0.203638-2.012843-0.304945-4.016477-0.304945-6.019087 0-38.381146 31.233352-69.614497 69.614497-69.614497 32.57593 0 60.474326 22.204721 67.824735 53.997821 0.356111 1.534959 0.823761 3.019777 1.402953 4.453429 4.696975 22.814612 7.076162 45.579081 7.076162 67.743894 0 37.485753-6.222725 74.352405-18.494213 109.592001-3.324722 9.546424-1.819438 20.111037 4.02671 28.345582 5.856381 8.245801 15.332197 13.146415 25.448602 13.156648l193.226816 0.101307c1.423419 0.264013 2.857071 0.426719 4.300956 0.477884 24.116257 0.9967 45.935192 13.614066 58.603723 34.090423 7.838525 12.31242 11.438517 26.800389 10.431583 41.939181-0.080841 0.945535-0.121773 1.911536-0.11154 2.877537 0 0.854461 0.040932 1.697665 0.11154 2.53166 0.010233 0.335644-0.030699 0.661056-0.11154 0.976234-0.101307 0.376577-0.193405 0.772596-0.284479 1.159406l-74.972529 330.391802c-0.914836 1.281179-1.738597 2.6432-2.449795 4.046153-5.937223 11.762905-14.660908 21.48329-25.346271 28.172643-10.746762 6.812149-23.059182 10.614755-35.757388 11.06194-0.854461-0.061398-513.766226-0.224104-513.766226-0.224104-0.467651-0.020466-0.935302-0.030699-1.402953-0.030699 0 0-111.01542 0.172939-112.718201 0.457418-1.932002 0-3.446495-1.50426-3.446495-3.415796l0.299829-416.334173c0-1.901303 1.545192-3.446495 3.01466-3.456728l1.245364 0.121773c1.174756 0.132006 2.653433 0.284479 3.52836 0.193405l83.82822-0.222057 0 339.367221c0 17.253966 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352L281.009092 435.350273c0-1.778506 0-8.631588 0-10.411117 0-17.253966-13.979386-30.928407-31.233352-30.928407-1.50426 0-117.547183 0.304945-119.402437 0.304945-36.34272 0-65.913199 29.566386-65.913199 65.893756l-0.299829 416.334173c0 36.337603 29.571503 65.902966 65.913199 65.902966 2.541893 0 111.406323-0.457418 111.406323-0.457418 0.457418 0.020466 0.925069 0.030699 1.382487 0.030699 0 0 511.458671 0.274246 512.505513 0.274246 25.469068 0 50.296523-7.197936 71.647807-20.73116 19.612687-12.281721 35.777855-29.881564 46.839795-50.967812 3.660366-5.622044 6.435573-11.875468 8.256034-18.615986 0.11154-0.416486 0.213871-0.823761 0.304945-1.240247l74.881454-330.340637c1.596358-6.212492 2.257413-12.586666 2.00261-18.992563C960.892707 473.366098 953.948551 446.331371 939.358251 423.424662z"
                                p-id="2069" fill="#1296db"></path>
                            <path
                                d="M450.027553 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C481.260905 532.629853 467.281519 518.650467 450.027553 518.650467z"
                                p-id="2070" fill="#1296db"></path>
                            <path
                                d="M693.805696 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C725.039048 532.629853 711.058638 518.650467 693.805696 518.650467z"
                                p-id="2071" fill="#1296db"></path>
                            <path
                                d="M648.940882 660.09492c-14.304797-9.393951-33.592073-5.398964-43.159986 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.423457-18.09717-33.266661-19.368116-9.17087-14.427594-28.254507-18.809391-42.834574-9.770528-14.650675 9.109472-19.155269 28.366048-10.055007 43.016723 11.214413 18.047028 41.96988 48.588625 86.156242 48.588625 43.962258 0 75.104535-30.318516 86.572728-48.222281C667.404396 688.461991 663.216004 669.500127 648.940882 660.09492z"
                                p-id="2072" fill="#1296db"></path>
                          </svg>
                          <svg v-if="true" style="width: 20px;height: 20px;" t="1645346242001" class="icon"
                               viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2068"
                               width="200" height="200">
                            <path
                                d="M939.358251 423.424662c-23.01825-37.252439-62.924121-60.779272-107.019409-63.209624-2.755764-0.38681-5.510504-0.579191-8.347109-0.579191l-152.202471-0.121773c6.649444-28.975938 10.015098-58.653865 10.015098-88.657202 0-28.223808-3.213181-57.139372-9.556657-85.952604-0.447185-2.043542-1.098008-4.006244-1.932002-5.866614-15.820314-57.302077-67.37755-96.841605-127.282918-96.841605-72.827679 0-132.081201 59.254545-132.081201 132.081201 0 3.334955 0.132006 6.66991 0.406253 10.015098-2.196015 57.211003-32.108279 109.947088-80.269162 141.363611-14.447037 9.42465-18.524912 28.773324-9.099239 43.220361 9.414417 14.437827 28.752858 18.535145 43.220361 9.099239 65.811892-42.925648 106.429984-115.325585 108.656699-193.684234 0.030699-1.332345-0.010233-2.663666-0.14224-3.996011-0.203638-2.012843-0.304945-4.016477-0.304945-6.019087 0-38.381146 31.233352-69.614497 69.614497-69.614497 32.57593 0 60.474326 22.204721 67.824735 53.997821 0.356111 1.534959 0.823761 3.019777 1.402953 4.453429 4.696975 22.814612 7.076162 45.579081 7.076162 67.743894 0 37.485753-6.222725 74.352405-18.494213 109.592001-3.324722 9.546424-1.819438 20.111037 4.02671 28.345582 5.856381 8.245801 15.332197 13.146415 25.448602 13.156648l193.226816 0.101307c1.423419 0.264013 2.857071 0.426719 4.300956 0.477884 24.116257 0.9967 45.935192 13.614066 58.603723 34.090423 7.838525 12.31242 11.438517 26.800389 10.431583 41.939181-0.080841 0.945535-0.121773 1.911536-0.11154 2.877537 0 0.854461 0.040932 1.697665 0.11154 2.53166 0.010233 0.335644-0.030699 0.661056-0.11154 0.976234-0.101307 0.376577-0.193405 0.772596-0.284479 1.159406l-74.972529 330.391802c-0.914836 1.281179-1.738597 2.6432-2.449795 4.046153-5.937223 11.762905-14.660908 21.48329-25.346271 28.172643-10.746762 6.812149-23.059182 10.614755-35.757388 11.06194-0.854461-0.061398-513.766226-0.224104-513.766226-0.224104-0.467651-0.020466-0.935302-0.030699-1.402953-0.030699 0 0-111.01542 0.172939-112.718201 0.457418-1.932002 0-3.446495-1.50426-3.446495-3.415796l0.299829-416.334173c0-1.901303 1.545192-3.446495 3.01466-3.456728l1.245364 0.121773c1.174756 0.132006 2.653433 0.284479 3.52836 0.193405l83.82822-0.222057 0 339.367221c0 17.253966 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352L281.009092 435.350273c0-1.778506 0-8.631588 0-10.411117 0-17.253966-13.979386-30.928407-31.233352-30.928407-1.50426 0-117.547183 0.304945-119.402437 0.304945-36.34272 0-65.913199 29.566386-65.913199 65.893756l-0.299829 416.334173c0 36.337603 29.571503 65.902966 65.913199 65.902966 2.541893 0 111.406323-0.457418 111.406323-0.457418 0.457418 0.020466 0.925069 0.030699 1.382487 0.030699 0 0 511.458671 0.274246 512.505513 0.274246 25.469068 0 50.296523-7.197936 71.647807-20.73116 19.612687-12.281721 35.777855-29.881564 46.839795-50.967812 3.660366-5.622044 6.435573-11.875468 8.256034-18.615986 0.11154-0.416486 0.213871-0.823761 0.304945-1.240247l74.881454-330.340637c1.596358-6.212492 2.257413-12.586666 2.00261-18.992563C960.892707 473.366098 953.948551 446.331371 939.358251 423.424662z"
                                p-id="2069" fill="#515151"></path>
                            <path
                                d="M450.027553 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C481.260905 532.629853 467.281519 518.650467 450.027553 518.650467z"
                                p-id="2070" fill="#515151"></path>
                            <path
                                d="M693.805696 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C725.039048 532.629853 711.058638 518.650467 693.805696 518.650467z"
                                p-id="2071" fill="#515151"></path>
                            <path
                                d="M648.940882 660.09492c-14.304797-9.393951-33.592073-5.398964-43.159986 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.423457-18.09717-33.266661-19.368116-9.17087-14.427594-28.254507-18.809391-42.834574-9.770528-14.650675 9.109472-19.155269 28.366048-10.055007 43.016723 11.214413 18.047028 41.96988 48.588625 86.156242 48.588625 43.962258 0 75.104535-30.318516 86.572728-48.222281C667.404396 688.461991 663.216004 669.500127 648.940882 660.09492z"
                                p-id="2072" fill="#515151"></path>
                          </svg>
                        </a>
                      </div>
                      <div class="amount">
                        {{ comment.praiseNum }}
                      </div>
                      <div class="reply">
                        <a @click="reply(comment, 0)" style="text-decoration: none;">回复</a>
                      </div>
                    </div>
                  </div>
                  <!--     子评论            -->
                  <div class="comment" v-for="(childComment, index) in comment.children" :key="index">
                    <div>
                      <a href="" class="user-link">
                        <el-avatar style="margin: 8px 8px;" size="small" :src="childComment.author.userImg"></el-avatar>
                      </a>
                    </div>
                    <div class="content-box">
                      <div class="comment-main">
                        <div class="user-box">
                          <a target="_blank" rel="" style="text-decoration: none;">
                            <span class="username">
                              {{ childComment.author.username }}
                            </span>
                          </a>
                          <div v-if="childComment.author.username" style="display: inline;">
                            <span class="reply">回复</span>
                            <a target="_blank" rel="" style="text-decoration: none;">
                            <span class="username">
                              {{ childComment.toUser.username }}
                            </span>
                            </a>
                          </div>
                          <!---->
                          <time :title="childComment.createTime" class="time">
                            {{ childComment.createTime }}
                          </time>
                        </div>
                        <div class="comment-content">
                          <MarkDown :text="childComment.content" class="content"/>
                        </div>
                        <!---->
                        <div class="action-box">
                          <div class="like">
                            <a href="">
                              <svg v-if="false" style="width: 20px;height: 20px;" t="1645346242001" class="icon"
                                   viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2068"
                                   width="200" height="200">
                                <path
                                    d="M939.358251 423.424662c-23.01825-37.252439-62.924121-60.779272-107.019409-63.209624-2.755764-0.38681-5.510504-0.579191-8.347109-0.579191l-152.202471-0.121773c6.649444-28.975938 10.015098-58.653865 10.015098-88.657202 0-28.223808-3.213181-57.139372-9.556657-85.952604-0.447185-2.043542-1.098008-4.006244-1.932002-5.866614-15.820314-57.302077-67.37755-96.841605-127.282918-96.841605-72.827679 0-132.081201 59.254545-132.081201 132.081201 0 3.334955 0.132006 6.66991 0.406253 10.015098-2.196015 57.211003-32.108279 109.947088-80.269162 141.363611-14.447037 9.42465-18.524912 28.773324-9.099239 43.220361 9.414417 14.437827 28.752858 18.535145 43.220361 9.099239 65.811892-42.925648 106.429984-115.325585 108.656699-193.684234 0.030699-1.332345-0.010233-2.663666-0.14224-3.996011-0.203638-2.012843-0.304945-4.016477-0.304945-6.019087 0-38.381146 31.233352-69.614497 69.614497-69.614497 32.57593 0 60.474326 22.204721 67.824735 53.997821 0.356111 1.534959 0.823761 3.019777 1.402953 4.453429 4.696975 22.814612 7.076162 45.579081 7.076162 67.743894 0 37.485753-6.222725 74.352405-18.494213 109.592001-3.324722 9.546424-1.819438 20.111037 4.02671 28.345582 5.856381 8.245801 15.332197 13.146415 25.448602 13.156648l193.226816 0.101307c1.423419 0.264013 2.857071 0.426719 4.300956 0.477884 24.116257 0.9967 45.935192 13.614066 58.603723 34.090423 7.838525 12.31242 11.438517 26.800389 10.431583 41.939181-0.080841 0.945535-0.121773 1.911536-0.11154 2.877537 0 0.854461 0.040932 1.697665 0.11154 2.53166 0.010233 0.335644-0.030699 0.661056-0.11154 0.976234-0.101307 0.376577-0.193405 0.772596-0.284479 1.159406l-74.972529 330.391802c-0.914836 1.281179-1.738597 2.6432-2.449795 4.046153-5.937223 11.762905-14.660908 21.48329-25.346271 28.172643-10.746762 6.812149-23.059182 10.614755-35.757388 11.06194-0.854461-0.061398-513.766226-0.224104-513.766226-0.224104-0.467651-0.020466-0.935302-0.030699-1.402953-0.030699 0 0-111.01542 0.172939-112.718201 0.457418-1.932002 0-3.446495-1.50426-3.446495-3.415796l0.299829-416.334173c0-1.901303 1.545192-3.446495 3.01466-3.456728l1.245364 0.121773c1.174756 0.132006 2.653433 0.284479 3.52836 0.193405l83.82822-0.222057 0 339.367221c0 17.253966 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352L281.009092 435.350273c0-1.778506 0-8.631588 0-10.411117 0-17.253966-13.979386-30.928407-31.233352-30.928407-1.50426 0-117.547183 0.304945-119.402437 0.304945-36.34272 0-65.913199 29.566386-65.913199 65.893756l-0.299829 416.334173c0 36.337603 29.571503 65.902966 65.913199 65.902966 2.541893 0 111.406323-0.457418 111.406323-0.457418 0.457418 0.020466 0.925069 0.030699 1.382487 0.030699 0 0 511.458671 0.274246 512.505513 0.274246 25.469068 0 50.296523-7.197936 71.647807-20.73116 19.612687-12.281721 35.777855-29.881564 46.839795-50.967812 3.660366-5.622044 6.435573-11.875468 8.256034-18.615986 0.11154-0.416486 0.213871-0.823761 0.304945-1.240247l74.881454-330.340637c1.596358-6.212492 2.257413-12.586666 2.00261-18.992563C960.892707 473.366098 953.948551 446.331371 939.358251 423.424662z"
                                    p-id="2069" fill="#1296db"></path>
                                <path
                                    d="M450.027553 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C481.260905 532.629853 467.281519 518.650467 450.027553 518.650467z"
                                    p-id="2070" fill="#1296db"></path>
                                <path
                                    d="M693.805696 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C725.039048 532.629853 711.058638 518.650467 693.805696 518.650467z"
                                    p-id="2071" fill="#1296db"></path>
                                <path
                                    d="M648.940882 660.09492c-14.304797-9.393951-33.592073-5.398964-43.159986 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.423457-18.09717-33.266661-19.368116-9.17087-14.427594-28.254507-18.809391-42.834574-9.770528-14.650675 9.109472-19.155269 28.366048-10.055007 43.016723 11.214413 18.047028 41.96988 48.588625 86.156242 48.588625 43.962258 0 75.104535-30.318516 86.572728-48.222281C667.404396 688.461991 663.216004 669.500127 648.940882 660.09492z"
                                    p-id="2072" fill="#1296db"></path>
                              </svg>
                              <svg v-if="true" style="width: 20px;height: 20px;" t="1645346242001" class="icon"
                                   viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2068"
                                   width="200" height="200">
                                <path
                                    d="M939.358251 423.424662c-23.01825-37.252439-62.924121-60.779272-107.019409-63.209624-2.755764-0.38681-5.510504-0.579191-8.347109-0.579191l-152.202471-0.121773c6.649444-28.975938 10.015098-58.653865 10.015098-88.657202 0-28.223808-3.213181-57.139372-9.556657-85.952604-0.447185-2.043542-1.098008-4.006244-1.932002-5.866614-15.820314-57.302077-67.37755-96.841605-127.282918-96.841605-72.827679 0-132.081201 59.254545-132.081201 132.081201 0 3.334955 0.132006 6.66991 0.406253 10.015098-2.196015 57.211003-32.108279 109.947088-80.269162 141.363611-14.447037 9.42465-18.524912 28.773324-9.099239 43.220361 9.414417 14.437827 28.752858 18.535145 43.220361 9.099239 65.811892-42.925648 106.429984-115.325585 108.656699-193.684234 0.030699-1.332345-0.010233-2.663666-0.14224-3.996011-0.203638-2.012843-0.304945-4.016477-0.304945-6.019087 0-38.381146 31.233352-69.614497 69.614497-69.614497 32.57593 0 60.474326 22.204721 67.824735 53.997821 0.356111 1.534959 0.823761 3.019777 1.402953 4.453429 4.696975 22.814612 7.076162 45.579081 7.076162 67.743894 0 37.485753-6.222725 74.352405-18.494213 109.592001-3.324722 9.546424-1.819438 20.111037 4.02671 28.345582 5.856381 8.245801 15.332197 13.146415 25.448602 13.156648l193.226816 0.101307c1.423419 0.264013 2.857071 0.426719 4.300956 0.477884 24.116257 0.9967 45.935192 13.614066 58.603723 34.090423 7.838525 12.31242 11.438517 26.800389 10.431583 41.939181-0.080841 0.945535-0.121773 1.911536-0.11154 2.877537 0 0.854461 0.040932 1.697665 0.11154 2.53166 0.010233 0.335644-0.030699 0.661056-0.11154 0.976234-0.101307 0.376577-0.193405 0.772596-0.284479 1.159406l-74.972529 330.391802c-0.914836 1.281179-1.738597 2.6432-2.449795 4.046153-5.937223 11.762905-14.660908 21.48329-25.346271 28.172643-10.746762 6.812149-23.059182 10.614755-35.757388 11.06194-0.854461-0.061398-513.766226-0.224104-513.766226-0.224104-0.467651-0.020466-0.935302-0.030699-1.402953-0.030699 0 0-111.01542 0.172939-112.718201 0.457418-1.932002 0-3.446495-1.50426-3.446495-3.415796l0.299829-416.334173c0-1.901303 1.545192-3.446495 3.01466-3.456728l1.245364 0.121773c1.174756 0.132006 2.653433 0.284479 3.52836 0.193405l83.82822-0.222057 0 339.367221c0 17.253966 13.979386 31.233352 31.233352 31.233352s31.233352-13.979386 31.233352-31.233352L281.009092 435.350273c0-1.778506 0-8.631588 0-10.411117 0-17.253966-13.979386-30.928407-31.233352-30.928407-1.50426 0-117.547183 0.304945-119.402437 0.304945-36.34272 0-65.913199 29.566386-65.913199 65.893756l-0.299829 416.334173c0 36.337603 29.571503 65.902966 65.913199 65.902966 2.541893 0 111.406323-0.457418 111.406323-0.457418 0.457418 0.020466 0.925069 0.030699 1.382487 0.030699 0 0 511.458671 0.274246 512.505513 0.274246 25.469068 0 50.296523-7.197936 71.647807-20.73116 19.612687-12.281721 35.777855-29.881564 46.839795-50.967812 3.660366-5.622044 6.435573-11.875468 8.256034-18.615986 0.11154-0.416486 0.213871-0.823761 0.304945-1.240247l74.881454-330.340637c1.596358-6.212492 2.257413-12.586666 2.00261-18.992563C960.892707 473.366098 953.948551 446.331371 939.358251 423.424662z"
                                    p-id="2069" fill="#515151"></path>
                                <path
                                    d="M450.027553 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C481.260905 532.629853 467.281519 518.650467 450.027553 518.650467z"
                                    p-id="2070" fill="#515151"></path>
                                <path
                                    d="M693.805696 518.650467c-17.253966 0-31.233352 13.979386-31.233352 31.233352l0 30.470989c0 17.253966 13.979386 31.233352 31.233352 31.233352 17.253966 0 31.233352-13.979386 31.233352-31.233352l0-30.470989C725.039048 532.629853 711.058638 518.650467 693.805696 518.650467z"
                                    p-id="2071" fill="#515151"></path>
                                <path
                                    d="M648.940882 660.09492c-14.304797-9.393951-33.592073-5.398964-43.159986 8.763594-0.132006 0.193405-13.614066 19.754926-34.171264 19.754926-19.98824 0-32.423457-18.09717-33.266661-19.368116-9.17087-14.427594-28.254507-18.809391-42.834574-9.770528-14.650675 9.109472-19.155269 28.366048-10.055007 43.016723 11.214413 18.047028 41.96988 48.588625 86.156242 48.588625 43.962258 0 75.104535-30.318516 86.572728-48.222281C667.404396 688.461991 663.216004 669.500127 648.940882 660.09492z"
                                    p-id="2072" fill="#515151"></path>
                              </svg>
                            </a>
                          </div>
                          <div class="amount">
                            {{ childComment.praiseNum }}
                          </div>
                          <div class="reply">
                            <a style="text-decoration: none;" @click="reply(childComment, 1, comment)">回复</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <el-divider><i class="el-icon-mobile-phone"></i></el-divider>
            </div>
          </el-card>
        </el-col>
        <el-col :xs="0" :sm="0" :md="0" :lg="0" :xl="4">
          <div class="grid-content bg-purple-light"></div>
        </el-col>
        <el-col :xs="7" :sm="6" :md="6" :lg="6" :xl="6">
        </el-col>
      </el-row>
    </div>
  </div>
</template>

<script>
import MarkDown from '@/components/MarkDown/MarkDown'
import CommentText from "@/components/CommentText/CommentText"
import {getToken} from "@/utils/token"

export default {
  name: "index",
  components: {
    MarkDown, CommentText
  },
  data() {
    return {
      content: '',
      comments: '',
      title: '',
      commentCount: 0,
      commentList: [],
      tagList: [],
      author: {},
      create_time: '',
      model_time: '',
      placeholder: "想说点什么？评论支持markdown语法。",//默认文字提示。
      // 展示回复框
      dialogVisible: false,
      replyText: '',
      // 回复用的comment
      commentParam: {
        userId: this.$store.state.user.userInfo.userId,
        articleId: this.$route.query.id,
        parentId: 0,
        toUserId: 0
      }
    }
  },
  methods: {
    //点击评论按钮后，触发的事件
    async submit_click() {
      // 先判断是否登录
      if (!getToken()) {
        this.$message.warning('未登录，请先登录~')
        await this.$router.push('/login')
        return
      }
      this.commentParam.content = this.comment_text
      const result = await this.$API.reqAddParentComment(this.commentParam)
      if (result.data.code === 200) {
        this.$refs.my_comment.success_submit("评论成功", 1500)
        await this.getComment()
      } else {
        this.$message.error('系统异常~ ' + result.data.msg)
        this.$refs.my_comment.err_submitFn("评论失败", 1500)
      }
      //你可以在这里验证用户输入的格式。
      //若格式错误可调用此函数：
      //this.$refs.my_comment.err_submitFn("格式错误",1500)

      //你可以在这儿请求AJAX
      //失败回调：
      // this.$refs.my_comment.err_submitFn("评论失败",1500)
      //成功回调
      // this.$refs.my_comment.success_submit("评论成功", 1500)
    },
    async submit_son_click() {
      // 先判断是否登录
      if (!getToken()) {
        this.$message.warning('未登录，请先登录~')
        await this.$router.push('/login')
        return
      }
      if (this.replyText === '') {
        this.$message.warning('评论区不能为空~')
        return
      }
      this.commentParam.content = this.replyText
      const result = await this.$API.reqAddParentComment(this.commentParam)
      if (result.data.code === 200) {
        this.$message.success('评论成功~')
      } else {
        this.$message.error('系统异常~ ' + result.data.msg)
      }
      this.replyText = ''
      this.dialogVisible = false
      await this.getComment()
    },
    giveup_son_click() {
      this.dialogVisible = false
    },
    reply(comment, index, comment_) {
      this.dialogVisible = true
      if (index === 0) {
        this.commentParam.parentId = comment.id
        this.commentParam.toUserId = comment.author.userId
        this.commentParam.username = comment.author.username
      } else {
        this.commentParam.parentId = comment_.id
        this.commentParam.username = comment.author.username
      }
    },
    async getArticle() {
      const result = await this.$API.reqGetArticleById(this.$route.query.id)
      if (result.data.code === 200) {
        this.title = result.data.data.article.title
        this.content = result.data.data.article.content
        this.author = result.data.data.author
        this.tagList = result.data.data.tagsList
        this.create_time = result.data.data.article.createTime
        this.model_time = result.data.data.article.modifyTime
      } else {
        this.$message.error('系统异常~ ' + result.data.msg)
      }
    },
    async getComment() {
      const result = await this.$API.reqGetCommentById(this.$route.query.id)
      if (result.data.code === 200) {
        this.commentCount = result.data.data.commentCount
        this.commentList = result.data.data.commentReturnList
      } else {
        this.$message.error('系统异常~ ' + result.data.msg)
      }
    },
  },
  mounted() {
    this.getArticle()
    this.getComment()
  },
  computed: {
    comment_text() {//获取子组件的评论内容。
      return this.$refs.my_comment.insert_comment.comment_text;
    }
  }
}
</script>

<style scoped>
#title {
  font-size: 32px;
  line-height: 36px;
}

.icon {
  font-size: 17px;
  float: right;
  margin: 10px 12px;
}

.userInfo {
  background-color: #f8f8f8;
  width: 645px;
  height: 40px;
  line-height: 40px;
  font-size: 13px;
}

.userLink {
  margin: auto 12px;
  color: #4cb9fc;
}

.lcs {
  text-align: center;
  margin: 22px auto;
}

.endEmg {
  margin: auto 20px;
  font-size: 15px;
  font-weight: bold;
  color: #77b72c;
}

.tags {
  font-size: 14px;
}

.hotTags {
  font-size: 16px;
  font-weight: 700;
  margin: 0 auto 15px 0;
}

.hotTag {
  margin: 6px 5px;
}

.clearfix:before,
.clearfix:after {
  display: table;
  content: "";
}

.clearfix:after {
  clear: both
}

.liLink {
  font-size: 13px;
  margin: 8px auto;
}

.elCol4 {
  margin: 10px 0;
}

.title {
  position: relative;
  line-height: 30px;
  font-weight: 600;
  font-size: 18px;
  color: #252933;
  width: 100%;
  justify-content: space-between;
  padding-bottom: 8px;
}

.comment {
  display: flex;
  padding: 1px 0;
}

.user-link {
  flex: 0 0 auto;
}

a {
  text-decoration: none;
  cursor: pointer;
  color: #909090;
}

.content-box {
  flex: 1 1 auto;
  margin-left: 3px;
}

.user-box {
  margin: 4px auto;
}

.username {
  max-width: 128px;
  font-size: 14px;
  color: #00a1d6
}

.comment-main {
  position: relative;
}

.comment-content {
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-box-orient: vertical;
}

.action-box {
  display: flex;
  align-items: center;
}

.like {

}

.amount {
  font-size: 5px;
  margin-left: -8px;
  margin-right: 17px;
}

.reply {
  font-size: 5px;
  color: #42b983;
  font-weight: bold;
}

.moreReply {
  margin: 2px 5px;
}

.el-divider--horizontal {
  display: block;
  height: 1px;
  width: 100%;
  margin: 9px 0;
}
</style>
